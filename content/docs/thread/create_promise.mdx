---
title: thread:create_promise
description: Creates a new promise context
badge: Shared
---

### Syntax

```lua
local ctx = thread:create_promise(exec = false, options = false)
```

### Parameters

| Type | Name | Description |
|------|------|-------------|
| `function` | exec | Function executed post promise initialization |
| `table` | options | Options containing the following fields:<br/>• `async` (bool) - whether to execute asynchronously<br/>• `timeout` (number) - timeout duration in milliseconds |

### Returns

| Type | Name | Description |
|------|------|-------------|
| `table` or `bool` | ctx | Returns promise context containing the following fields on successful execution:<br/>• `resolve` (function) - callable function to resolve the promise with passed arguments<br/>• `reject` (function) - callable function to reject the promise with passed arguments<br/>or false on failure |

<hr/>

### Callback

```lua
exec([self], resolve, reject)
```

| Type | Name | Description |
|------|------|-------------|
| `thread` | self | Running thread instance incase `options.async` was enabled |
| `function` | resolve | Callable function to resolve the promise with passed arguments |
| `function` | reject | Callable function to reject the promise with passed arguments |

<hr/>

### Example

```lua
local promise = thread:create_promise()
```